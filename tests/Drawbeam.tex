\documentclass{scrartcl}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage{lmodern}
\usepackage{pst-optexp}
\usepackage{showexpl}
\definecolor{hellgelb}{rgb}{1,1,0.85}
\definecolor{colKeys}{rgb}{0,0,1}
\definecolor{colIdentifier}{rgb}{0,0,0}
\definecolor{colComments}{rgb}{1,0,0}
\definecolor{colString}{rgb}{0,0.5,0}
\lstset{%
    language=PSTricks,%
    float=hbp,%
    basicstyle=\ttfamily\small, %
    identifierstyle=\color{colIdentifier}, %
    keywordstyle=\color{colKeys}, %
    stringstyle=\color{colString}, %
    commentstyle=\color{colComments}, %
    columns=flexible, %
    tabsize=4, %
    frame=single, %
    extendedchars=true, %
    showspaces=false, %
    showstringspaces=false, %
%    numbers=left, 
%    numbersep=0.8em,
%    numberstyle=\tiny, %
    breaklines=true, %
    breakautoindent=true, 
    captionpos=b,
    xleftmargin=1em
}
\lstset{explpreset={pos=l,wide=false,rframe={},preset=\centering}}

\begin{document}
\section{This document should resume all settings and properties of the \textbackslash Drawbeam macro}
\subsection{Line properties, and direction}
\subsubsection{invec}

\begin{LTXexample}[width=6cm]
\begin{pspicture}[showgrid=true](6,5)
  \pnode(1.5,1){A}
  \pnode(5.5,1){B}
  \pnode(3.5,4){C} 
  \optbox[endbox](B)(A){}
  \mirror[mirrorradius=1](A)(B)(C){} 
  \mirror(B)(C)(B){} 
  \multido{\r=-0.05+0.05}{3}{%
    \Drawbeam[invec=1 \r]{1}{2}{3}.
  }
\end{pspicture}
\end{LTXexample}

\bigskip

\subsubsection{startpos}

\begin{LTXexample}[width=6cm]
\begin{pspicture}[showgrid=true](6,5)
  \pnode(1.5,1){A}
  \pnode(5.5,1){B}
  \pnode(3.5,4){C} 
  \optbox[endbox](B)(A){}
  \mirror[mirrorradius=1](A)(B)(C){} 
  \mirror(B)(C)(B){} 
  \multido{\r=-0.2+0.2}{3}{%
    \Drawbeam[startpos=0 \r, 
              invec=1 0]{1}{2}{3}.
  }
\end{pspicture}
\end{LTXexample}
\bigskip

\subsubsection{startpos and invec}

\begin{LTXexample}[width=6cm]
\begin{pspicture}[showgrid=true](6,5)
  \pnode(1.5,1){A}
  \pnode(5.5,1){B}
  \pnode(3.5,4){C} 
  \optbox[endbox](B)(A){}
  \mirror[mirrorradius=1](A)(B)(C){} 
  \mirror(B)(C)(B){} 
  \multido{\r=-0.1+0.1}{3}{%
    \Drawbeam[startpos=0 -2 \r\space mul,
              invec=1 \r]{1}{2}{3}.
  }
\end{pspicture}
\end{LTXexample}
\bigskip

\subsubsection{That does not work, yet!}
\begin{LTXexample}[width=6cm]
\begin{pspicture}[showgrid=true](6,5)
  \pnode(1.5,1){A}
  \pnode(5.5,1){B}
  \pnode(3.5,4){C} 
  \optbox[endbox](B)(A){}
  \mirror[mirrorradius=1,
          mirrorwidth=1.5](A)(B)(C){} 
  \mirror(B)(C)(B){} 
  \multido{\r=-0.1+0.1}{3}{%
    \Drawbeam[startpos=0 2 \r\space mul,
              invec=1 \r]{1}{2}{3}.
  }
\end{pspicture}
\end{LTXexample}
\bigskip

\subsubsection{Using different line properties}
\begin{LTXexample}[width=6cm]
\begin{pspicture}[showgrid=true](6,5)
  \pnode(1.5,1){A}
  \pnode(5.5,1){B}
  \pnode(3.5,4){C} 
  \optbox[endbox](B)(A){}
  \mirror[mirrorwidth=2](A)(B)(C){} 
  \mirror(B)(C)(B){} 
  \newpsstyle{Beam}{linestyle=dashed, 
                    arrows=->, 
                    strokeopacity=0.2, 
                    arrowinset=0, 
                    arrowscale=2}
  \Drawbeam[invec=1 0.1]{1}{2}{3}.
  \newpsstyle{Beam}{linecolor=red, 
                    linewidth=4\pslinewidth,
                    linejoin=2}
  \Drawbeam[invec=1 -0.1]{1}{2}{3}.
\end{pspicture}
\end{LTXexample}
\bigskip

\subsection{Different connection types}

\subsubsection{Using the refractive index and refraction law}   

\begin{LTXexample}[width=6cm]
\begin{pspicture}[showgrid=true](5,3)
  \pnode(0, 1.5){A}
  \pnode(5, 1.5){B}
  \lens[lens=4 4 3, n=2, position=0.3](A)(B){}
  \definecolor[ps]{bl}{rgb}{tx@addDict begin Red Green Blue end}%
  \addtopsstyle{Beam}{linecolor=bl}
  \multido{\i=0+1}{4}{%
    \pstVerb{\i\space 650 580 sub 3 div mul 580 add tx@addDict begin wavelengthToRGB end }%
    \Drawbeam[startpos=0 0.2 \i\space 0.2 mul add, nMul=1 \i\space 0.05 mul add]{(A)}{1}{(B)}.
  }%
\end{pspicture}
\end{LTXexample}
\end{document}
