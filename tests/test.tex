\documentclass{scrartcl}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage{lmodern}
\usepackage{pst-optexp}
\usepackage{showexpl}
\begin{document}
\begin{pspicture}[showgrid=true](3,1.5)
  \optbox[abspos=3.7](0,1)(3,1)
\end{pspicture}

\begin{LTXexample}
\begin{pspicture}(3,1.5)
\addtopsstyle{OptComp}{linewidth=3\pslinewidth, linecolor=red}
\newpsstyle{OptionalStyle}{linecolor=blue}
\lens(0,1)(2,1)
% linecolor overwritten, linewidth of OptComp
\lens[optional](0,1)(3,1)
\end{pspicture}
\end{LTXexample}
\end{document}
\begin{pspicture}(3,2)
\mirror[showoptdots, angle=0, beam](0,1)(1.9,1)(1.9,0)
\end{pspicture}

\begin{pspicture}(5,5)
  \lens(0,3)(3,3)
  \optgrating(0,3)(3,3)(3,0)
  \lens(3,3)(3,0)
  \addtopsstyle{Beam}{beamwidth=0.2, fillstyle=solid, fillcolor=red}
  \drawwidebeam[skipconn=3]{(0,3)}{-}{(3,0)}
\end{pspicture}

\begin{pspicture}(4,3)
  \pnode(0,0.5){A}\pnode(2,0.5){B}\pnode(4,3){C}
  \nodexn{(C)-(1.5,0)}{C'}
  \optgrating(A)(B)(C)
  \addtopsstyle{Beam}{fillstyle=solid, fillcolor=green, opacity=0.3}
  \drawwidebeam[beamwidth=0.3]{(A)}{1}{(C)}
  \psset{savebeampoints, loadbeampoints}
  \drawwidebeam[beamwidth=0.3]{(A)}{1}
  \drawwidebeam{1}{(C')}
  \rput[rb]([Xnodesep=0.3, offset=0.2]C){0. order}
  \rput[rb]([offset=0.2]C'){1. order}
\end{pspicture}

\begin{pspicture}(4,2) 
  \pnode(0,1){A}\pnode(4,1){B}
  \begin{optexp}
  \lens[lens=0.5 0.5 0.5, abspos=0.5](A)(B)
  \lens[lens=4 4 2, abspos=2](A)(B)
  \addtopsstyle{Beam}{fillstyle=solid, fillcolor=green, opacity=0.3}
  \psset{savebeampoints, loadbeampoints}
  \drawwidebeam[beamwidth=0.2, stopinside]{(A)}{1}
  \drawwidebeam[beamdiv=-30]{1}{2}
  \drawwidebeam{2}{(B)}
  \end{optexp}
\end{pspicture}

\begin{pspicture}[showgrid=true](5,5)
  \mirror[mirrorradius=2](0,3)(2,1)(0,0)
  \drawwidebeam[connectplanes, beamwidth=0.2]{(0,3)}{}{(0,0)}
  \lens(0,4)(5,4)
  \drawwidebeam[connectplanes, beamwidth=0.2]{(0,4)}{}{(5,4)}
\end{pspicture}

\begin{pspicture}(2.1,3)
\pnode(0,0){A}\pnode(2,0){B}
\pnode(0.3,3){C}\pnode(1.7,3){D}
\optcoupler[fiberout=none,
            addtoFiberIn1={angleA=0, ArrowInside=->},
            addtoFiberIn2={angleA=180, arrows=<-},
            abspos=0.5, compname=Cpl](A)(B)(C)(D){}
\optfiber[nofiber, compname=Hnlf, abspos=1](C)(C|A){}
\optamp[nofiber, abspos=2, compname=Amp](D|B)(D){}
\drawfiber{Cpl}{Hnlf}
\drawfiber[startnode=1, stopnode=N, ncurv=1.2]{Hnlf}{Amp}
\drawfiber{Cpl}{Amp}
\end{pspicture}

\begin{pspicture}(3,4)
  \psset{beam, fillstyle=solid, fillcolor=black}
  \optbox(0,3.5)(3,3.5){no layers}
  \begin{optexp}
    \optbox(0,1.5)(3,1.5){with layers}
  \end{optexp}
\end{pspicture}

\begin{pspicture}(3,2.5)
  \pnode(0,2){A}\optplane(A)(0,1){A}
  \pnode(4,0){B}\optplane(3,0)(0,1){B}
  \optprism[n=1.8](A)([Xnodesep=2]A)(B)
  \addtopsstyle{Beam}{fillcolor=red, fillstyle=solid, opacity=0.3}
  \drawwidebeam[beamdiv=5]{A}{2}{B}
\end{pspicture}

\begin{pspicture}(3,2.7)
  \optplane(0,1)(0,1){A}
  \lens[lens=2 2 2, abspos=2.5](0,1)(3,1)
  \optplane(3,1)(0,1){B}
  \drawbeam{A}{1}{B}
  \drawbeam[beamangle=15]{A}{1}{B}
  \drawbeam[beamangle=28]{A}{1}{B}
  \drawbeam[beamangle=29]{A}{1}{B}
  \drawbeam{A}{1}{B}
\end{pspicture}

\begin{pspicture}[showgrid=true](5,5)
  \pnode(0,1){A}
  \pnode(5,1){B}
  \lens[compshift=0.2, angle=20](A)(B)
  \psset{beamangleabs}
  \drawbeam{(A)}{1}
  \drawbeam[n=1, beampos=0.2, savebeampoints, stopinside]{(A)}{1}
  \drawbeam[loadbeampoints, beamangle=10]{1}{(B)}
  \addtopsstyle{Beam}{linestyle=none, fillcolor=red, fillstyle=solid}
  \drawwidebeam[n=1, beamwidth=0.3, savebeampoints, stopinside]{(A)}{1}
  \drawwidebeam[loadbeampoints, beamangle=10]{1}{(B)}
\end{pspicture}

Czerny-Turner monochromator

\begin{pspicture}[showgrid=true](0,-1)(10,5)
\psset{linewidth=1.5\pslinewidth}
\psframe[fillstyle=solid,fillcolor=gray!90,linestyle=none](0,-1)(9,4)
\psset{linecolor=white}\addtopsstyle{Beam}{linecolor=white}
\addtopsstyle{ExtendedMirror}{hatchcolor=white}
\pnode(0,3){A}\pnode(8,3){B}\pnode(3,1.5){C}\pnode(8,0){D}\pnode(0,0){E}%
\psset{mirrorradius=13,  mirrorwidth=1.5, gratingwidth=1.5, mirrortype=extended, phwidth=0.07, outerheight=1.5}%
\pinhole[position=0.2](A)(B)%
\mirror(A)(B)(C)
\optgrating[reverse, angle=15](B)(C)(D)
\mirror(C)(D)(E)
\pinhole[position=0.8](D)(E)
\drawwidebeam[beamwidth=0.2, beamdiv=0.1 8 0.2 mul atan neg, savebeampoints]{(A)}{1-3}
\psset{loadbeampoints}%
\drawwidebeam[addtoBeam={linecolor=green!40!white}]{3-5}{(E)}
\drawwidebeam[beamangle=3, addtoBeam={linecolor=blue!40!white}]{3-6}
\drawwidebeam[beamangle=-3, addtoBeam={linecolor=red!40!white}]{3-6}
\end{pspicture}

\begin{pspicture}(4,2) 
  \pnode(0,1){A}\pnode(4,1){B}
  \begin{optexp}
  \lens[lens=0.5 0.5 0.5, abspos=0.5](A)(B)
  \lens[lens=4 4 2, abspos=2](A)(B)
  \addtopsstyle{Beam}{fillstyle=solid, fillcolor=green, opacity=0.3}
  \psset{loadbeampoints, savebeampoints}
  \drawwidebeam[beamwidth=0.2, stopinside]{(A)}{1}
  \drawwidebeam[beamdiv=-30]{1}{2}
  \drawwidebeam{2}{(B)}
  \end{optexp}
\end{pspicture}

\lstset{explpreset={%
    escapeinside={*}{*}, pos=l,width=-99pt,overhang=0pt,hsep=5mm,
    varwidth,vsep=\bigskipamount,rframe={}}, }

\begin{LTXexample}[explpreset={escapeinside={}}]
\begin{pspicture*}(0,2)(3.05,6)
  \lens[lens=8 8 8, abspos=0.6](0.5,2)(3,2)
  \optplate[position=1, plateheight=6](0.5,2)(3,2)
  \psset{beampos=2.1}
  \drawbeam[beamangle=-60]{1}{2}
  \drawbeam[beamangle=-40]{1}{2}
  \drawbeam[beamangle=-20]{1}{2}
  \psline[linecolor=gray!50, linewidth=3\pslinewidth, arrows=->, arrowinset=0, arrowscale=1.3](\oenodeOut{1})([offset=2.1]\oenodeOut{1})
\end{pspicture*}
\end{LTXexample}

\begin{pspicture}[showgrid=true](0,-0.5)(12,2.5)
\psset{couplersize=0.5, couplertype=rectangular, couplersep=0.2}
\wdmsplitter(0, 1)(3,2)(3,0)
\psdot(\oenodeIfc{1}{})\uput[180](\oenodeIfc{1}{}){1}
\psdot(\oenodeIfc{2}{})\uput[0](\oenodeIfc{2}{}){2}
\psdot(\oenodeIfc{N}{})\uput[0](\oenodeIfc{N}{}){N}
\wdmcoupler(4, 2)(4,0)(7,1)
\psdot(\oenodeIfc{1}{})\uput[180](\oenodeIfc{1}{}){1}
\psdot(\oenodeIfc{2}{})\uput[180](\oenodeIfc{2}{}){2}
\psdot(\oenodeIfc{N}{})\uput[0](\oenodeIfc{N}{}){N}
\optcoupler(8,2)(8,0)(11,2)(11,0)
\psdot(\oenodeIfc{1}{})\uput[180](\oenodeIfc{1}{}){1}
\psdot(\oenodeIfc{2}{})\uput[180](\oenodeIfc{2}{}){2}
\psdot(\oenodeIfc{3}{})\uput[0](\oenodeIfc{3}{}){3}
\psdot(\oenodeIfc{N}{})\uput[0](\oenodeIfc{N}{}){N}
\end{pspicture}

\newpsobject{MOLensIn}{lens}{lens=0.5 0.5 0.5}
\newpsobject{MOLensOut}{lens}{lens=4 4 2}
\begin{pspicture}[showgrid=true](5,2) 
   \pnode(0,1){A}\pnode(5,1){B}
   \psset{n=1}
   \begin{optexp}
   \MOLensIn[abspos=0.5](A)(B){}
   \MOLensOut[abspos=1](A)(B){}
   \MOLensOut[abspos=4](A)(B){}
   \MOLensIn[abspos=4.5](A)(B){}
   \addtopsstyle{Beam}{fillstyle=solid, fillcolor=red, opacity=0.3}
   \psset{loadbeampoints, savebeampoints}
   \drawwidebeam[beamwidth=0.2]{(A)}{1}
   \drawwidebeam[beamdiv=45]{1}{2}
   \drawwidebeam[stopinside]{2}{3}
   \drawwidebeam[beamdiv=-45]{3}{4}
   \drawwidebeam{4}{(B)}
 \end{optexp}
\end{pspicture}

\begin{pspicture}(3,2) 
  \pnode(0,1){A}\pnode(3,1){B}
  \begin{optexp}
  \lens[lens=0.5 0.5 0.5, abspos=0.5](A)(B)
  \lens[lens=4 4 2, abspos=1.5](A)(B)
  \addtopsstyle{Beam}{fillstyle=solid, fillcolor=green, opacity=0.3}
  \psset{loadbeampoints, savebeampoints}
  \drawwidebeam[beamwidth=0.2, stopinside]{(A)}{1}
  \drawwidebeam[beamdiv=-35]{1}{2}
  \drawwidebeam{2}{(B)}
  \end{optexp}
\end{pspicture}

\begin{pspicture*}(0,1.5)(7,5)
\lens[lens=6 6 6, n=2](0,2)(6,2)
\optplate[plateheight=4](3,2)(10,2)
\addtopsstyle{Beam}{linewidth=0.5\pslinewidth}
\multido{\r=-0.25+0.25}{3}{%
  \drawbeam[beamangle=0, beampos=\r]{(0,2)}{1}{2}
}%
\multido{\r=-0.25+0.25}{3}{%
  \drawbeam[linecolor=red, beamangle=15, beampos=\r]{(0,2)}{1}{2}
}%
\multido{\r=-0.25+0.25}{3}{%
  \drawbeam[linecolor=blue, beamangle=30, beampos=\r]{(0,2)}{1}{2}
}%
\end{pspicture*}

\begin{pspicture*}(0,1.5)(7,5)
\lens[lens=6 6 6, n=2](0,2)(6,2)
\optplate[plateheight=4](3,2)(10,2)
\addtopsstyle{Beam}{linewidth=0.5\pslinewidth}
\multido{\r=-0.15+0.3}{2}{%
  \drawbeam[beampos=\r]{(0,2)}{1}{2}
}%
\multido{\r=0.5+0.3}{2}{%
  \drawbeam[linecolor=red, beampos=\r]{(0,2)}{1}{2}
}%
\multido{\r=1.15+0.3}{2}{%
  \drawbeam[linecolor=blue, beampos=\r]{(0,2)}{1}{2}
}%
\end{pspicture*}

\begin{pspicture}[showgrid=true](5,3)
  \lens[n=2.0, lens=3 3 3](0,1)(5,1)
  \optplane(0,1)(0,1){AA}
  \drawbeam[beampos=0.5]{AA}{1}{(5,2)}
\end{pspicture}
\end{document}
