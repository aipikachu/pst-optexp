%%% drawfiber.tex --- 

%% Author: cbersch
%% Version: $Id: Drawfiber.tex,v 0.0 2011/07/11 10:25:10 Exp$


\documentclass{scrartcl}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage{lmodern}
\usepackage{textcomp}
\usepackage{pst-optexp}
\usepackage{showexpl}
\lstset{language=[LaTeX]TeX, escapechar=§, varwidth}
\addtopsstyle{Fiber}{linecolor=red}
\begin{document}

\begin{LTXexample}[linerange={1-3,9-12,19}]
\begin{pspicture}[showgrid=true](5,8)
  \psset{fiberin}
  \optbox[angle=20, rotateref=bl](0,1)(5,1){}
  \psdot(\oenodeRefA{})\uput[90](\oenodeRefA{}){RefA}%
  \psdot(\oenodeRefB{})\uput[90](\oenodeRefB{}){RefB}%
  \psdot(\oenodeRotref{})\uput[-90](\oenodeRotref{}){Rotref}%
  \psdot(\oenodeTrefA{})\uput[-90](\oenodeTrefA{}){TrefA}%
  \psdot(\oenodeTrefB{})\uput[90](\oenodeTrefB{}){TrefB}%
  \psline[linecolor=black!30, 
            linestyle=dashed](\oenodeTrefA{})(\oenodeTrefB{})
  \psset{linecolor=orange}%
  \optbox[angle=45](0,5)(5,5){}%
  \psline[linecolor=orange!30, 
            linestyle=dashed](\oenodeTrefA{})(\oenodeTrefB{})
  \psdot(\oenodeRefA{})\psdot(\oenodeRefB{})%
  \psdot(\oenodeRefA{})\uput[90](\oenodeRefA{}){RefA}%
  \psdot(\oenodeRefB{})\uput[90](\oenodeRefB{}){RefB}%
  \psdot(\oenodeRotref{})\uput[-90](\oenodeRotref{}){Rotref}%
  \psdot(\oenodeTrefA{})\uput[-90](\oenodeTrefA{}){TrefA}%
  \psdot(\oenodeTrefB{})\uput[90](\oenodeTrefB{}){TrefB}%
\end{pspicture}
\end{LTXexample}


\begin{pspicture}[showgrid=true](-2.5,-2)(2.5,2)
  \optbox[optboxwidth=1](0,-2)(0,1){}
  \psarc[fillstyle=solid,fillcolor=gray!20, linestyle=none](0,0){2}{0}{180}
  \psline[linestyle=dashed]([Xnodesep=-2]\oenodeOut{})([Xnodesep=2]\oenodeOut{})
  \addtopsstyle{Fiber}{ArrowInside=->}
  \multido{\i=10+40}{5}{%
    \drawfiber{(2;\i)}{1}
  }
  \addtopsstyle{Fiber}{linecolor=blue}
  \drawfiber[stopnode=N]{(2;-30)}{1}
  \drawfiber[stopnode=N]{(2;210)}{1}
\end{pspicture}
\end{document}
\hspace{2cm}
\begin{pspicture}[showgrid=true](5,5)
  \psset{unit=1.2}\psrotate(0,0){-45}{\optbox[fiberin, angle=45, rotateref=bl](0,2)(5,2){}
  \psline(\oenode{}{RotrefA})(\oenode{}{RotrefB})
  \psset{linecolor=orange!90!black}%
  \optbox[fiberin, rotateref=bl, compshift=0.5, angle=45](0,2)(5,2){}%
  \psline(\oenode{}{RotrefA})(\oenode{}{RotrefB})}
\end{pspicture}

\begin{pspicture}[showgrid=false](5,2.7)
  \optbox[compname=B, optboxwidth=1](2.5,0)(2.5,2){}
  \newpsstyle{Fiber}{linecolor=red}
  \drawfiber[stopnode=1]{(5,0.75)}{B}
  \drawfiber[stopnode=N]{(5, 1.25)}{B}
  \drawfiber[stopnode=1]{(0, 0.25)}{B}
  \drawfiber[stopnode=N]{(0, 1.75)}{B}
  \psline[linestyle=dashed, linecolor=gray, dash=3pt 2pt](0,0.5)(5,0.5)
  \psline[linestyle=dashed, linecolor=gray, dash=3pt 2pt](0,1.5)(5,1.5)
  \rput[t](2.5,2.7){\ttfamily\textbackslash drawfiber\{(Node)\}\{Comp\}}
\end{pspicture}
\hspace{1cm}%
\begin{pspicture}[showgrid=false](5,2.7)
  \optbox[compname=B, optboxwidth=1](2.5,0)(2.5,2){}
  \newpsstyle{Fiber}{linecolor=red}
  \drawfiber[startnode=1]{B}{(5,0.75)}
  \drawfiber[startnode=N]{B}{(5, 1.25)}
  \drawfiber[startnode=1]{B}{(0, 0.25)}
  \drawfiber[startnode=N]{B}{(0, 1.75)}
  \psline[linestyle=dashed, linecolor=gray, dash=3pt 2pt](0,0.5)(5,0.5)
  \psline[linestyle=dashed, linecolor=gray, dash=3pt 2pt](0,1.5)(5,1.5)
  \rput[t](2.5,2.7){\ttfamily\textbackslash drawfiber\{Comp\}\{(Node)\}}
\end{pspicture}

% 
\hspace{1cm}%
\begin{pspicture}[showgrid=true](5,3)
  \optbox[compname=B, optboxwidth=1](0.5,0)(0.5,2){}
  \psset{stopnode=N}
  \drawfiber[linecolor=red]{(3,3)}{B}
  \drawfiber{(0,1.51)}{B}
  \newpsstyle{Fiber}{linecolor=blue}
  \drawfiber{(0,1.49)}{B}
  \drawfiber{(0,0)}{B}
\end{pspicture}

\begin{pspicture}[showgrid=true](3,2)
  \optbox(0.5,0)(0.5,2){}
  \optbox(2.5,0)(2.5,2){}
  \drawfiber[startnode=N, stopnode=1]{1}{2}
  \drawfiber[startnode=1, stopnode=N]{1}{2}
  \drawfiber[startnode=1]{1}{2}
  \drawfiber[startnode=N]{1}{2}
  \newpsstyle{Fiber}{linecolor=blue, ncurv=1}
  \drawfiber[stopnode=1]{1}{2}
  \drawfiber[stopnode=N]{1}{2}
  \newpsstyle{Fiber}{linecolor=green, ncurv=1.5}
  \drawfiber{1}{2}
\end{pspicture}
%
\hspace{1cm}
\begin{pspicture}[showgrid=true](3,2)
  \pnode(0.5,1){A}
  \optbox(2.5,0)(2.5,2){}
%  \addtopsstyle{Fiber}{angleA=180, relangle}
  \drawfiber[linecolor=green, ncurv=1]{(A)}{1}
  \drawfiber[stopnode=1]{(A)}{1}
  \drawfiber[stopnode=N]{(A)}{1}
\end{pspicture}
\hspace{1cm}
\begin{pspicture}[showgrid=true](3,2)
  \pnode(2.5,1){B}
  \optbox(0.5,0)(0.5,2){}
%  \addtopsstyle{Fiber}{angleB=180, relangle}
  \drawfiber[linecolor=green, ncurv=1]{1}{(B)}
  \drawfiber[startnode=1]{1}{(B)}
  \drawfiber[startnode=N]{1}{(B)}
\end{pspicture}

 \begin{pspicture}[showgrid=false](10,5)
   \addtopsstyle{Fiber}{angleA=30}
   \pnode(0, 1){A}
   \pnode(5, 1){B}
   \optbox(A)(B){}
   \drawfiber{(A)}{}
   \drawfiber{}{(B)}
%
   \pnode(2, 3){C}
   \pnode(4,2){D}
   \optbox(C)(D){}
   \drawfiber{(C)}{}
   \drawfiber{}{(D)}
%
   \pnode(7,4){E}
   \pnode(7,0){F}
   \optbox(E)(F){}
   \drawfiber{}{(F)}
   \drawfiber{(E)}{}
 \end{pspicture}

 \begin{pspicture}[showgrid=false](10,5)
   \addtopsstyle{Fiber}{angleA=30, relangle}
   \pnode(0, 1){A}
   \pnode(5, 1){B}
   \optbox(A)(B){}
   \drawfiber{(A)}{}
   \drawfiber{}{(B)}
%
   \pnode(2, 3){C}
   \pnode(4,2){D}
   \optbox(C)(D){}
   \drawfiber{(C)}{}
   \drawfiber{}{(D)}
%
   \pnode(7,4){E}
   \pnode(7,0){F}
   \optbox(E)(F){}
   \drawfiber{}{(F)}
   \drawfiber{(E)}{}
\end{pspicture}

 \begin{pspicture}[showgrid=false](10,5)
   \pnode(0, 1){A}
   \pnode(5, 1){B}
   \optbox(A)(B){}
   \drawfiber[addtoFiber={linecolor=green}]{(A)}{}
   \drawfiber{}{(B)}
%
   \addtopsstyle{Fiber}{linecolor=blue}
   \pnode(2, 3){C}
   \pnode(4,2){D}
   \optbox(C)(D){}
   \drawfiber{(C)}{}
   \drawfiber{}{(D)}
%
   \pnode(7,4){E}
   \pnode(7,0){F}
   \optbox(E)(F){}
   \drawfiber{}{(F)}
   \drawfiber{(E)}{}
 \end{pspicture}
\end{document}
